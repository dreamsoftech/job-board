<%= simple_form_for @job, html: { multipart: true } do |f| %>
<div class="widget-body">
	<div class="widget-main">
		<div class="row-fluid">
			<h3 id="step-title">Step1: Create your Job</h3>
			<br>
			<div id="fuelux-wizard" class="span5 hide row-fluid" data-target="#step-container">
				<ul class="wizard-steps">
					<li data-target="#step1" class="active">
						<span class="step">1</span>
						<span class="title">Create</span>
					</li>

					<li data-target="#step2">
						<span class="step">2</span>
						<span class="title">Preview</span>
					</li>

					<li data-target="#step3">
						<span class="step">3</span>
						<span class="title">Publish</span>
					</li>
				</ul>
			</div>
			<br><br><br>
			<hr>
			<div class="row-fluid wizard-actions hide">
				<a id="next-step-btn" class="btn-u btn-lightblue btn-next btn-medium">
					Continue to Step 3 to publish your ad
				</a>
				<a class="btn-prev btn-small hide gray">
					 <img src="/assets/back-arrow.png"/>
					 Make changes
				</a>
			</div>
			<div class="step-content" id="step-container">
				<div class="step-pane active" id="step1">
					<%= render partial: "form", locals: {f: f} %>
				</div>

				<div class="step-pane" id="step2">
					<%= render "preview" %>
				</div>

				<div class="step-pane" id="step3">
					<%= render partial: "publish", :locals => { f: f } %>
				</div>
			</div>
		</div>
	</div><!--/widget-main-->
</div><!--/widget-body-->
<% end %>

<script type="text/javascript">
$(function() {
	$('[data-rel=tooltip]').tooltip();

	$('#fuelux-wizard').ace_wizard().on('change' , function(e, info){
	
		if (info.direction =="next")
		{
			if (info.step == 1)
			{
				if(!$('#new_job').valid()) return false;

				$("#step-title").html("Step2: Preview your Ad");
				$("a.btn-next").html("Continue to Step 3 to publish your ad");
				$("a.btn-prev").removeClass("hide");

				$('#title')				.html($('#job_title').val());
				$('#company_name').html($('#job_company_name').val());
				$('#location')		.html($('#job_location').val());
				$('#url')					.html($('#job_url').val());
				$('#description')	.html($('#input-description-div').html());
				$('#apply_information')	.html($('#job_apply_information').val());
				$('#job_description').val($('#input-description-div').html());

				var tags = new Array();
				var tag_captions = "";
				$("li.search-choice").each(function( index ) 
				{
					tags.push($(this).text());
				});

				for (var i = 0; i < tags.length; i++)
				{
					var tag_captions = tag_captions + "<li><a>"+tags[i]+"</a></li>";
				}
				$('#job_tags').val(tags.join(','));
				$('#tags')	.html(tag_captions);
				$('.wizard-actions').removeClass('hide');
			}

			if (info.step == 2)
			{
				$("#step-title").html("Step3: Publish your Ad");
				$("a.btn-next").html("Place Order and Publish your Ad");
				$("a.btn-prev").removeClass("hide");
				$('.wizard-actions').addClass('hide');
			}
		}
		else if (info.direction == "previous")
		{
			if (info.step == 3)
			{
				$("#step-title").html("Step2: Publish your Ad");
				$("a.btn-next").html("Continue to Step 3 to publish your ad");
				$('.wizard-actions').removeClass('hide');
			}
			else if (info.step == 2)
			{
				$("#step-title").html("Step1: Create your Job");
				$("a.btn-next").html("Continue to Step 2 to preview your ad");
				$("a.btn-prev").addClass("hide");
				$(".wizard-actions").addClass("hide");
			}
		}
	}).on('finished', function(e) {
		
	}).on('stepclick', function(e, info){
		console.log(info);
		if (info.step == 1)
		{
			$("#step-title").html("Step1: Create your Job");
			$("a.btn-next").html("Continue to Step 2 to preview your Ad");
			$("a.btn-prev").addClass("hide");
			$(".wizard-actions").addClass("hide");
		}
		else if (info.step == 2)
		{
			$("#step-title").html("Step2: Preview your Ad");
			$("a.btn-next").html("Continue to Step 3 to publish your Ad");
			$("a.btn-prev").removeClass("hide");			
			$(".wizard-actions").removeClass("hide");
		}
	});
});
</script>